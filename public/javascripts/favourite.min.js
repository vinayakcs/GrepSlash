$(function(){function t(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}}function e(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){for(var r=e||0,i=this.length;i>r;r++)if(this[r]===t)return r;return-1})}function r(){var t=localStorage.getItem("grep_slash_sash_favourite");return t=null!==t?JSON.parse(t):{}}function i(t){var e=null,r=null;return e=$(t).closest(".project").find(".screenshot>a").attr("href"),r=$(t).closest(".project").find(".main>table>tbody>tr>td>h2>a").text(),(null===e||"undefined"==typeof e)&&(e=$(".screenshot>a").attr("href"),r=$("#project > div.info > div.screenshot>a>img").attr("alt")),{title:r,link:e}}function n(t){return t.substr(t.lastIndexOf("/")+1).split("-")[0]}function a(){if(0==$("#fav").children().length){var t="<div id='favouritePreData'> You haven't favourited any project. Click on the plus icon next to project name to add it to your list of favourites.</div>";$("#fav").html(t)}}function o(t){var e="";if($.isEmptyObject(t))a();else{var r,i;for(var o in t)if(t.hasOwnProperty(o))try{i=n(o),r=t[o],e=e+'<div id="'+i+'"><a href='+s+o+' target="_blank">'+i+" "+r+"</a></div>",$("#favouritePreData").remove()}catch(l){console.log("Error"+l)}$("#fav").html(e)}}function l(t){var e=null;$(".favourite").click(function(){if(e=i(this),null!=e.link||"undefined"!=typeof e.link){var r=n(e.link);if(t.hasOwnProperty(e.link))delete t[e.link],$(this).children("span").toggleClass("pretick",!0),$(this).children("span").toggleClass("posttick",!1),localStorage.setItem("grep_slash_sash_favourite",JSON.stringify(t)),$("#fav>#"+r).remove(),a();else{$("#favouritePreData").remove(),$(this).children("span").toggleClass("pretick",!1),$(this).children("span").toggleClass("posttick",!0),t[e.link]=e.title;var o=JSON.stringify(t);localStorage.setItem("grep_slash_sash_favourite",o);var l=e.title;$("#fav").append('<div id="'+r+'"><a href='+s+e.link+' target="_blank">'+r+" "+l+"</a></div>")}}})}var s="http://www.grepslash.com";if(t()){e();var f,c;f=r(),o(f),$(".favourite").each(function(){c=i(this),(null!=c.link||"undefined"!=typeof c.link)&&$(this).children("span").addClass(f.hasOwnProperty(c.link)?"posttick":"pretick")}),l(f)}else $(".main>.favourite").hide()});